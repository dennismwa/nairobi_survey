<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nairobi Walkability Survey</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- AOS Animation Library -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
    
    <!-- Custom Styles -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass-effect {
            backdrop-filter: blur(16px) saturate(180%);
            background-color: rgba(255, 255, 255, 0.75);
            border: 1px solid rgba(255, 255, 255, 0.125);
        }
        
        .section-gradient {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .submit-gradient {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .smooth-scroll {
            scroll-behavior: smooth;
        }
        
        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .hover-lift:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .floating-dots::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: radial-gradient(circle at 20% 30%, rgba(255,255,255,0.1) 2px, transparent 2px),
                              radial-gradient(circle at 80% 70%, rgba(255,255,255,0.1) 2px, transparent 2px),
                              radial-gradient(circle at 40% 80%, rgba(255,255,255,0.08) 1px, transparent 1px);
            background-size: 50px 50px, 30px 30px, 25px 25px;
            animation: float 20s infinite linear;
        }
        
        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
            100% { transform: translate(0, 0) rotate(360deg); }
        }
        
        .progress-ring {
            transition: stroke-dashoffset 0.3s ease;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        
        /* Custom checkbox and radio styles */
        .custom-checkbox:checked {
            background-color: #667eea;
            border-color: #667eea;
        }
        
        .custom-radio:checked {
            background-color: #667eea;
            border-color: #667eea;
        }
        
        /* Smooth animations */
        .slide-up {
            animation: slideUp 0.6s ease-out;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Required field styling */
        .required {
            color: #ef4444;
        }

        /* Error styling */
        .error {
            border-color: #ef4444 !important;
            background-color: #fef2f2;
        }

        .error-message {
            color: #ef4444;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
    </style>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#667eea',
                        secondary: '#764ba2',
                        accent: '#f093fb'
                    }
                }
            }
        }
    </script>
</head>

<body class="gradient-bg min-h-screen smooth-scroll">
    
    <!-- Progress Bar -->
    <div class="fixed top-0 left-0 w-full h-1 bg-white bg-opacity-20 z-50">
        <div id="progressBar" class="h-full bg-gradient-to-r from-primary to-secondary transition-all duration-300 ease-out" style="width: 0%"></div>
    </div>
    
    <!-- Floating Progress Indicator -->
    <div class="fixed top-6 right-6 z-40">
        <div class="relative w-16 h-16">
            <svg class="w-16 h-16" viewBox="0 0 36 36">
                <path
                    d="M18 2.0845
                      a 15.9155 15.9155 0 0 1 0 31.831
                      a 15.9155 15.9155 0 0 1 0 -31.831"
                    fill="none"
                    stroke="rgba(255,255,255,0.2)"
                    stroke-width="2"
                />
                <path
                    id="progressRing"
                    class="progress-ring"
                    d="M18 2.0845
                      a 15.9155 15.9155 0 0 1 0 31.831
                      a 15.9155 15.9155 0 0 1 0 -31.831"
                    fill="none"
                    stroke="#ffffff"
                    stroke-width="2"
                    stroke-dasharray="100, 100"
                    stroke-dashoffset="100"
                />
            </svg>
            <div class="absolute inset-0 flex items-center justify-center">
                <span id="progressText" class="text-white text-xs font-semibold">0%</span>
            </div>
        </div>
    </div>
    
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        
        <!-- Header Section -->
        <div class="glass-effect rounded-3xl mb-8 overflow-hidden shadow-2xl hover-lift" data-aos="fade-up">
            <div class="relative section-gradient p-12 text-white text-center floating-dots">
                <div class="relative z-10">
                    <div class="mb-6">
                        <i class="fas fa-walking text-6xl opacity-90"></i>
                    </div>
                    <h1 class="text-4xl md:text-5xl font-bold mb-4">
                        Nairobi Walkability Survey
                    </h1>
                    <p class="text-xl opacity-90 mb-6">
                        Enhancing Road Safety Through Walkable-Oriented Development
                    </p>
                    <div class="inline-flex items-center bg-white bg-opacity-20 rounded-full px-6 py-3">
                        <i class="fas fa-bus mr-3"></i>
                        <span class="font-medium">BRT Line 3 Case Study</span>
                    </div>
                </div>
            </div>
            
            <!-- Researcher Info -->
            <div class="bg-white p-6 md:p-8">
                <div class="flex flex-col items-center text-center">
                    <div class="bg-primary bg-opacity-10 rounded-full p-4 mb-6">
                        <i class="fas fa-user-graduate text-primary text-3xl"></i>
                    </div>
                    <div class="max-w-2xl mx-auto">
                        <h3 class="text-xl md:text-2xl font-semibold text-gray-800 mb-4">Research Information</h3>
                        <p class="text-gray-600 mb-6 text-sm md:text-base leading-relaxed">
                            This research investigates how Walkable-Oriented Development (WOD) can improve pedestrian safety and mobility around Nairobi's BRT Line 3 stations. Your participation will help guide government and NaMATA in making walking safer and more inclusive for everyone.
                        </p>
                        <div class="bg-gray-50 rounded-xl p-4 md:p-6 mb-6">
                            <div class="flex flex-col sm:flex-row items-center justify-center gap-4 sm:gap-8 text-sm">
                                <div class="flex items-center">
                                    <i class="fas fa-clock text-primary mr-2"></i>
                                    <span>Duration: 7-10 minutes</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-shield-alt text-green-500 mr-2"></i>
                                    <span>Confidential & Secure</span>
                                </div>
                            </div>
                        </div>
                        <div class="text-sm text-gray-500">
                            <strong>Alex Ngamau</strong> - Master's Student<br>
                            Faculty of Creative Science and Engineering, Waseda University
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Survey Form -->
        <form id="surveyForm" class="space-y-8">
            
            <!-- Enumerator Information Section -->
            <div class="glass-effect rounded-3xl overflow-hidden shadow-xl hover-lift" data-aos="fade-up" data-aos-delay="50">
                <div class="bg-gradient-to-r from-blue-500 to-indigo-600 p-6">
                    <div class="flex items-center text-white">
                        <div class="bg-white bg-opacity-20 rounded-full w-12 h-12 flex items-center justify-center mr-4">
                            <i class="fas fa-clipboard-user text-lg"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold">Enumerator Information</h2>
                            <p class="opacity-90">Survey team details</p>
                        </div>
                        <div class="ml-auto">
                            <i class="fas fa-user-tie text-3xl opacity-80"></i>
                        </div>
                    </div>
                </div>
                
                <div class="p-8 bg-white space-y-6">
                    <!-- Enumerator Name -->
                    <div class="space-y-4">
                        <label class="block text-lg font-semibold text-gray-800">
                            <i class="fas fa-user text-primary mr-2"></i>
                            Enumerator Name:
                        </label>
                        <input type="text" name="enumerator_name" placeholder="Enter enumerator's full name" 
                               class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors duration-200">
                    </div>
                    
                    <!-- Enumerator Location -->
                    <div class="space-y-4">
                        <label class="block text-lg font-semibold text-gray-800">
                            <i class="fas fa-map-marker-alt text-primary mr-2"></i>
                            Survey Collection Location:
                        </label>
                        <input type="text" name="enumerator_location" placeholder="e.g., Westlands Shopping Mall, University of Nairobi, Bus Stop Kasarani" 
                               class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors duration-200">
                        <div class="text-sm text-gray-600 px-2">
                            <i class="fas fa-info-circle mr-1"></i>
                            Please specify the landmark, building, or area where this survey is being conducted
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section I: Basic Information -->
            <div class="glass-effect rounded-3xl overflow-hidden shadow-xl hover-lift" data-aos="fade-up" data-aos-delay="100">
                <div class="section-gradient p-6">
                    <div class="flex items-center text-white">
                        <div class="bg-white bg-opacity-20 rounded-full w-12 h-12 flex items-center justify-center mr-4">
                            <span class="font-bold text-lg">I</span>
                        </div>
                        
                        <div>
                            <h2 class="text-2xl font-bold">Basic Information</h2>
                            <p class="opacity-90">Tell us about yourself</p>
                        </div>
                        <div class="ml-auto">
                            <i class="fas fa-user-circle text-3xl opacity-80"></i>
                        </div>
                    </div>
                </div>
                
                <div class="p-8 bg-white space-y-8">
                    
                    <!-- Gender -->
                    <div class="space-y-4">
                        <label class="block text-lg font-semibold text-gray-800">
                            <i class="fas fa-venus-mars text-primary mr-2"></i>
                            Q1. Please select your gender:
                        </label>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="gender" value="male" class="custom-radio mr-3">
                                <span>Male</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="gender" value="female" class="custom-radio mr-3">
                                <span>Female</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="gender" value="other" class="custom-radio mr-3">
                                <span>Other</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="gender" value="prefer_not_say" class="custom-radio mr-3">
                                <span>Prefer not to say</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Age -->
                    <div class="space-y-4">
                        <label class="block text-lg font-semibold text-gray-800">
                            <i class="fas fa-birthday-cake text-primary mr-2"></i>
                            Q2. What is your age group?
                        </label>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="age" value="below_18" class="custom-radio mr-3">
                                <span>Below 18 years</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="age" value="18_25" class="custom-radio mr-3">
                                <span>18–25 years</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="age" value="26_35" class="custom-radio mr-3">
                                <span>26–35 years</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="age" value="36_45" class="custom-radio mr-3">
                                <span>36–45 years</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="age" value="46_60" class="custom-radio mr-3">
                                <span>46–60 years</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="age" value="over_60" class="custom-radio mr-3">
                                <span>Over 60 years</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Education -->
                    <div class="space-y-4">
                        <label class="block text-lg font-semibold text-gray-800">
                            <i class="fas fa-graduation-cap text-primary mr-2"></i>
                            Q3. What is your highest level of education?
                        </label>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="education" value="no_formal" class="custom-radio mr-3">
                                <span>No formal education</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="education" value="primary" class="custom-radio mr-3">
                                <span>Primary School</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="education" value="secondary" class="custom-radio mr-3">
                                <span>Secondary School / High School</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="education" value="technical" class="custom-radio mr-3">
                                <span>Technical/Vocational College</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="education" value="university" class="custom-radio mr-3">
                                <span>University (Bachelor's degree)</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="education" value="postgraduate" class="custom-radio mr-3">
                                <span>Postgraduate (Master's/PhD)</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Occupation -->
                    <div class="space-y-4">
                        <label class="block text-lg font-semibold text-gray-800">
                            <i class="fas fa-briefcase text-primary mr-2"></i>
                            Q4. What is your current occupation?
                        </label>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="occupation" value="student" class="custom-radio mr-3">
                                <span>Student</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="occupation" value="government" class="custom-radio mr-3">
                                <span>Government/Public Sector</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="occupation" value="private" class="custom-radio mr-3">
                                <span>Private Sector</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="occupation" value="self_employed" class="custom-radio mr-3">
                                <span>Self-employed/Informal</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="occupation" value="retired" class="custom-radio mr-3">
                                <span>Retired</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="occupation" value="unemployed" class="custom-radio mr-3">
                                <span>Unemployed</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="occupation" value="homemaker" class="custom-radio mr-3">
                                <span>Homemaker</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="occupation" value="other" class="custom-radio mr-3">
                                <span>Other</span>
                            </label>
                        </div>
                        <input type="text" name="occupation_other" placeholder="If other, please specify" 
                               class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors duration-200">
                    </div>
                    
                    <!-- Income -->
                    <div class="space-y-4">
                        <label class="block text-lg font-semibold text-gray-800">
                            <i class="fas fa-money-bill-wave text-primary mr-2"></i>
                            Q5. What is your average monthly household income?
                        </label>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="income" value="below_10k" class="custom-radio mr-3">
                                <span>Below KES 10,000</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="income" value="10k_30k" class="custom-radio mr-3">
                                <span>KES 10,001 – 30,000</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="income" value="30k_60k" class="custom-radio mr-3">
                                <span>KES 30,001 – 60,000</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="income" value="60k_100k" class="custom-radio mr-3">
                                <span>KES 60,001 – 100,000</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="income" value="above_100k" class="custom-radio mr-3">
                                <span>Above KES 100,000</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="income" value="prefer_not_say" class="custom-radio mr-3">
                                <span>Prefer not to say</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Residence -->
                    <div class="space-y-4">
                        <label class="block text-lg font-semibold text-gray-800">
                            <i class="fas fa-home text-primary mr-2"></i>
                            Q6. Where is your primary residence?
                        </label>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <input type="text" name="sub_county" placeholder="Sub-County"
                                   class="p-4 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors duration-200">
                            <input type="text" name="ward" placeholder="Ward"
                                   class="p-4 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors duration-200">
                            <input type="text" name="estate" placeholder="Estate"
                                   class="p-4 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors duration-200">
                        </div>
                        <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200 w-fit">
                            <input type="checkbox" name="residence_privacy" value="prefer_not_say" class="custom-checkbox mr-3">
                            <span>Prefer not to say</span>
                        </label>
                    </div>
                    
                    <!-- Car Ownership -->
                    <div class="space-y-4">
                        <label class="block text-lg font-semibold text-gray-800">
                            <i class="fas fa-car text-primary mr-2"></i>
                            Q7. Do you or does your household own a private car?
                        </label>
                        <div class="flex space-x-4">
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="car_ownership" value="yes" class="custom-radio mr-3">
                                <span>Yes</span>
                            </label>
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="car_ownership" value="no" class="custom-radio mr-3">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Bus Usage -->
                    <div class="space-y-4">
                        <label class="block text-lg font-semibold text-gray-800">
                            <i class="fas fa-bus text-primary mr-2"></i>
                            Q8. How often do you use buses or matatus for transport?
                        </label>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3">
                            <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                <input type="radio" name="bus_usage" value="never" class="custom-radio mr-3">
                                <span>Never</span></label>
                           <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                               <input type="radio" name="bus_usage" value="rarely" class="custom-radio mr-3">
                               <span>Rarely</span>
                           </label>
                           <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                               <input type="radio" name="bus_usage" value="sometimes" class="custom-radio mr-3">
                               <span>Sometimes</span>
                           </label>
                           <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                               <input type="radio" name="bus_usage" value="often" class="custom-radio mr-3">
                               <span>Often</span>
                           </label>
                           <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                               <input type="radio" name="bus_usage" value="daily" class="custom-radio mr-3">
                               <span>Daily</span>
                           </label>
                       </div>
                   </div>
                   
                   <!-- Walking Usage -->
                   <div class="space-y-4">
                       <label class="block text-lg font-semibold text-gray-800">
                           <i class="fas fa-walking text-primary mr-2"></i>
                           Q9. How often do you use walking as your only mode of transport?
                       </label>
                       <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3">
                           <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                               <input type="radio" name="walking_usage" value="never" class="custom-radio mr-3">
                               <span>Never</span>
                           </label>
                           <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                               <input type="radio" name="walking_usage" value="rarely" class="custom-radio mr-3">
                               <span>Rarely</span>
                           </label>
                           <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                               <input type="radio" name="walking_usage" value="sometimes" class="custom-radio mr-3">
                               <span>Sometimes</span>
                           </label>
                           <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                               <input type="radio" name="walking_usage" value="often" class="custom-radio mr-3">
                               <span>Often</span>
                           </label>
                           <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                               <input type="radio" name="walking_usage" value="daily" class="custom-radio mr-3">
                               <span>Daily</span>
                           </label>
                       </div>
                   </div>
                   
                   <!-- Recent Trip -->
                   <div class="space-y-4">
                       <label class="block text-lg font-semibold text-gray-800">
                           <i class="fas fa-route text-primary mr-2"></i>
                           Q10. For your most recent trip, what was your origin and destination?
                       </label>
                       <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                           <input type="text" name="trip_origin" placeholder="Origin (e.g., Home address or landmark)"
                                  class="p-4 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors duration-200">
                           <input type="text" name="trip_destination" placeholder="Destination (e.g., Work, School, Market)"
                                  class="p-4 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors duration-200">
                       </div>
                   </div>
                   
                   <!-- Transport Mode -->
                   <div class="space-y-4">
                       <label class="block text-lg font-semibold text-gray-800">
                           <i class="fas fa-shipping-fast text-primary mr-2"></i>
                           Q11. Which mode of transport did you use for that trip?
                       </label>
                       <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                           <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                               <input type="radio" name="transport_mode" value="walking" class="custom-radio mr-3">
                               <span>Walking</span>
                           </label>
                           <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                               <input type="radio" name="transport_mode" value="bicycle" class="custom-radio mr-3">
                               <span>Bicycle</span>
                           </label>
                           <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                               <input type="radio" name="transport_mode" value="matatu_bus" class="custom-radio mr-3">
                               <span>Matatu/Bus</span>
                           </label>
                           <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                               <input type="radio" name="transport_mode" value="personal_car" class="custom-radio mr-3">
                               <span>Personal Car</span>
                           </label>
                           <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                               <input type="radio" name="transport_mode" value="motorcycle" class="custom-radio mr-3">
                               <span>Motorcycle/Boda-boda</span>
                           </label>
                           <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                               <input type="radio" name="transport_mode" value="taxi" class="custom-radio mr-3">
                               <span>Taxi/Ride-sharing</span>
                           </label>
                           <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                               <input type="radio" name="transport_mode" value="other" class="custom-radio mr-3">
                               <span>Other</span>
                           </label>
                       </div>
                       <input type="text" name="transport_mode_other" placeholder="If other, please specify" 
                              class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors duration-200">
                   </div>
               </div>
           </div>

           <!-- Section II: WOD Questions -->
           <div class="glass-effect rounded-3xl overflow-hidden shadow-xl hover-lift" data-aos="fade-up" data-aos-delay="200">
               <div class="section-gradient p-6">
                   <div class="flex items-center text-white">
                       <div class="bg-white bg-opacity-20 rounded-full w-12 h-12 flex items-center justify-center mr-4">
                           <span class="font-bold text-lg">II</span>
                       </div>
                       <div>
                           <h2 class="text-2xl font-bold">Walkable-Oriented Development</h2>
                           <p class="opacity-90">Your experience with pedestrian infrastructure</p>
                       </div>
                       <div class="ml-auto">
                           <i class="fas fa-road text-3xl opacity-80"></i>
                       </div>
                   </div>
               </div>
               
               <div class="p-8 bg-white space-y-12">
                   
                   <!-- Section A: Pedestrian Safety Perception -->
                   <div class="space-y-6">
                       <div class="flex items-center mb-6">
                           <div class="bg-primary bg-opacity-10 rounded-full p-3 mr-4">
                               <i class="fas fa-shield-alt text-primary text-xl"></i>
                           </div>
                           <h3 class="text-2xl font-bold text-gray-800">Section A: Pedestrian Safety Perception</h3>
                       </div>
                       
                       <!-- Q1 - General Safety -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q1. How safe do you feel walking in the Nairobi area in general?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="general_safety" value="very_unsafe" class="custom-radio mr-3">
                                   <span>Very unsafe</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="general_safety" value="unsafe" class="custom-radio mr-3">
                                   <span>Unsafe</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="general_safety" value="neutral" class="custom-radio mr-3">
                                   <span>Neutral</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="general_safety" value="safe" class="custom-radio mr-3">
                                   <span>Safe</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="general_safety" value="very_safe" class="custom-radio mr-3">
                                   <span>Very safe</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q2 - Accident Concern -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q2. How concerned are you about pedestrian accidents while walking?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="accident_concern" value="extremely_concerned" class="custom-radio mr-3">
                                   <span>Extremely concerned</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="accident_concern" value="very_concerned" class="custom-radio mr-3">
                                   <span>Very concerned</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="accident_concern" value="moderately_concerned" class="custom-radio mr-3">
                                   <span>Moderately concerned</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="accident_concern" value="slightly_concerned" class="custom-radio mr-3">
                                   <span>Slightly concerned</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="accident_concern" value="not_concerned" class="custom-radio mr-3">
                                   <span>Not concerned</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q3 - Driver Yield -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q3. How often do drivers yield to pedestrians at designated crossings?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="driver_yield" value="never" class="custom-radio mr-3">
                                   <span>Never</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="driver_yield" value="rarely" class="custom-radio mr-3">
                                   <span>Rarely</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="driver_yield" value="sometimes" class="custom-radio mr-3">
                                   <span>Sometimes</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="driver_yield" value="often" class="custom-radio mr-3">
                                   <span>Often</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="driver_yield" value="always" class="custom-radio mr-3">
                                   <span>Always</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q4 - Night Safety -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q4. How safe do you feel walking at night near your residence?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="night_safety" value="very_unsafe" class="custom-radio mr-3">
                                   <span>Very unsafe</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="night_safety" value="unsafe" class="custom-radio mr-3">
                                   <span>Unsafe</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="night_safety" value="neutral" class="custom-radio mr-3">
                                   <span>Neutral</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="night_safety" value="safe" class="custom-radio mr-3">
                                   <span>Safe</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="night_safety" value="very_safe" class="custom-radio mr-3">
                                   <span>Very safe</span>
                               </label>
                           </div>
                       </div>
                   </div>
                   
                   <!-- Section B: Walkability -->
                   <div class="space-y-6">
                       <div class="flex items-center mb-6">
                           <div class="bg-primary bg-opacity-10 rounded-full p-3 mr-4">
                               <i class="fas fa-walking text-primary text-xl"></i>
                           </div>
                           <h3 class="text-2xl font-bold text-gray-800">Section B: Walkability of Urban Environment</h3>
                       </div>
                       
                       <!-- Q5 - Walkway Importance -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q5. How important is it that walkways are well-maintained and in good condition?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="walkway_importance" value="not_important" class="custom-radio mr-3">
                                   <span>Not important</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="walkway_importance" value="slightly_important" class="custom-radio mr-3">
                                   <span>Slightly important</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="walkway_importance" value="moderately_important" class="custom-radio mr-3">
                                   <span>Moderately important</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="walkway_importance" value="very_important" class="custom-radio mr-3">
                                   <span>Very important</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="walkway_importance" value="extremely_important" class="custom-radio mr-3">
                                   <span>Extremely important</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q6 - Obstacles Frequency -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q6. How often do you encounter obstacles or poor conditions on pedestrian walkways?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="obstacles_frequency" value="always" class="custom-radio mr-3">
                                   <span>Always</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="obstacles_frequency" value="often" class="custom-radio mr-3">
                                   <span>Often</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="obstacles_frequency" value="sometimes" class="custom-radio mr-3">
                                   <span>Sometimes</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="obstacles_frequency" value="rarely" class="custom-radio mr-3">
                                   <span>Rarely</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="obstacles_frequency" value="never" class="custom-radio mr-3">
                                   <span>Never</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q7 - Path Connectivity -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q7. How strongly do you agree that pedestrian paths efficiently connect to key destinations?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="path_connectivity" value="strongly_disagree" class="custom-radio mr-3">
                                   <span>Strongly disagree</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="path_connectivity" value="disagree" class="custom-radio mr-3">
                                   <span>Disagree</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="path_connectivity" value="neutral" class="custom-radio mr-3">
                                   <span>Neutral</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="path_connectivity" value="agree" class="custom-radio mr-3">
                                   <span>Agree</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="path_connectivity" value="strongly_agree" class="custom-radio mr-3">
                                   <span>Strongly agree</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q8 - Comfort Satisfaction -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q8. How satisfied are you with the comfort and shade provided along pedestrian routes?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="comfort_satisfaction" value="very_dissatisfied" class="custom-radio mr-3">
                                   <span>Very dissatisfied</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="comfort_satisfaction" value="dissatisfied" class="custom-radio mr-3">
                                   <span>Dissatisfied</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="comfort_satisfaction" value="neutral" class="custom-radio mr-3">
                                   <span>Neutral</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="comfort_satisfaction" value="satisfied" class="custom-radio mr-3">
                                   <span>Satisfied</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="comfort_satisfaction" value="very_satisfied" class="custom-radio mr-3">
                                   <span>Very satisfied</span>
                               </label>
                           </div>
                       </div>
                   </div>
                   
                   <!-- Section C: Infrastructure Quality -->
                   <div class="space-y-6">
                       <div class="flex items-center mb-6">
                           <div class="bg-primary bg-opacity-10 rounded-full p-3 mr-4">
                               <i class="fas fa-tools text-primary text-xl"></i>
                           </div>
                           <h3 class="text-2xl font-bold text-gray-800">Section C: Infrastructure Quality</h3>
                       </div>
                       
                       <!-- Q9 - Walkway Obstruction -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q9. Are pedestrian walkways free from obstruction such as parked vehicles, vendors, or debris?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="walkway_obstruction" value="never" class="custom-radio mr-3">
                                   <span>Never</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="walkway_obstruction" value="rarely" class="custom-radio mr-3">
                                   <span>Rarely</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="walkway_obstruction" value="sometimes" class="custom-radio mr-3">
                                   <span>Sometimes</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="walkway_obstruction" value="often" class="custom-radio mr-3">
                                   <span>Often</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="walkway_obstruction" value="always" class="custom-radio mr-3">
                                   <span>Always</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q10 - Street Lighting -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q10. How adequate is street lighting for pedestrian areas at night?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="street_lighting" value="not_adequate" class="custom-radio mr-3">
                                   <span>Not adequate at all</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="street_lighting" value="slightly_adequate" class="custom-radio mr-3">
                                   <span>Slightly adequate</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="street_lighting" value="moderately_adequate" class="custom-radio mr-3">
                                   <span>Moderately adequate</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="street_lighting" value="adequate" class="custom-radio mr-3">
                                   <span>Adequate</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="street_lighting" value="very_adequate" class="custom-radio mr-3">
                                   <span>Very adequate</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q11 - Road Surface Safety -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q11. How safe are road surfaces for pedestrians?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="road_surface_safety" value="very_unsafe" class="custom-radio mr-3">
                                   <span>Very unsafe</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="road_surface_safety" value="unsafe" class="custom-radio mr-3">
                                   <span>Unsafe</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="road_surface_safety" value="neutral" class="custom-radio mr-3">
                                   <span>Neutral</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="road_surface_safety" value="safe" class="custom-radio mr-3">
                                   <span>Safe</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="road_surface_safety" value="very_safe" class="custom-radio mr-3">
                                   <span>Very safe</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q12 - Traffic Calming -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q12. How effective are traffic calming measures (e.g., speed bumps) in slowing down vehicles?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="traffic_calming" value="not_effective" class="custom-radio mr-3">
                                   <span>Not effective at all</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="traffic_calming" value="slightly_effective" class="custom-radio mr-3">
                                   <span>Slightly effective</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="traffic_calming" value="moderately_effective" class="custom-radio mr-3">
                                   <span>Moderately effective</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="traffic_calming" value="very_effective" class="custom-radio mr-3">
                                   <span>Very effective</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="traffic_calming" value="extremely_effective" class="custom-radio mr-3">
                                   <span>Extremely effective</span>
                               </label>
                           </div>
                       </div>
                   </div>
                   
                   <!-- Section D: Socioeconomic Context -->
                   <div class="space-y-6">
                       <div class="flex items-center mb-6">
                           <div class="bg-primary bg-opacity-10 rounded-full p-3 mr-4">
                               <i class="fas fa-money-bill-wave text-primary text-xl"></i>
                           </div>
                           <h3 class="text-2xl font-bold text-gray-800">Section D: Socioeconomic Context (Income Disparities)</h3>
                       </div>
                       
                       <!-- Q13 - Income Limitation -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q13. To what extent does your income limit your transportation options, forcing you to walk?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="income_limitation" value="completely" class="custom-radio mr-3">
                                   <span>Completely</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="income_limitation" value="significantly" class="custom-radio mr-3">
                                   <span>Significantly</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="income_limitation" value="moderately" class="custom-radio mr-3">
                                   <span>Moderately</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="income_limitation" value="slightly" class="custom-radio mr-3">
                                   <span>Slightly</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="income_limitation" value="not_at_all" class="custom-radio mr-3">
                                   <span>Not at all</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q14 - Affordability Influence -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q14. How significantly does affordability influence your decision to walk instead of using other transport?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="affordability_influence" value="very_significantly" class="custom-radio mr-3">
                                   <span>Very significantly</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="affordability_influence" value="significantly" class="custom-radio mr-3">
                                   <span>Significantly</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="affordability_influence" value="moderately" class="custom-radio mr-3">
                                   <span>Moderately</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="affordability_influence" value="slightly" class="custom-radio mr-3">
                                   <span>Slightly</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="affordability_influence" value="not_significantly" class="custom-radio mr-3">
                                   <span>Not significantly</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q15 - Cost Effect -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q15. How strongly do the costs of alternative transport options affect your modal choices?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="cost_effect" value="very_strongly" class="custom-radio mr-3">
                                   <span>Very strongly</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="cost_effect" value="strongly" class="custom-radio mr-3">
                                   <span>Strongly</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="cost_effect" value="moderately" class="custom-radio mr-3">
                                   <span>Moderately</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="cost_effect" value="slightly" class="custom-radio mr-3">
                                   <span>Slightly</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="cost_effect" value="not_at_all" class="custom-radio mr-3">
                                   <span>Not at all</span>
                               </label>
                           </div>
                       </div>
                   </div>
                   
                   <!-- Section E: Pedestrian Mobility Patterns -->
                   <div class="space-y-6">
                       <div class="flex items-center mb-6">
                           <div class="bg-primary bg-opacity-10 rounded-full p-3 mr-4">
                               <i class="fas fa-route text-primary text-xl"></i>
                           </div>
                           <h3 class="text-2xl font-bold text-gray-800">Section E: Pedestrian Mobility Patterns</h3>
                       </div>
                       
                       <!-- Q16 - Walk Frequency -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q16. How frequently do you walk to local markets, workplaces, or educational facilities?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="walk_frequency" value="never" class="custom-radio mr-3">
                                   <span>Never</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="walk_frequency" value="rarely" class="custom-radio mr-3">
                                   <span>Rarely</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="walk_frequency" value="sometimes" class="custom-radio mr-3">
                                   <span>Sometimes</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="walk_frequency" value="often" class="custom-radio mr-3">
                                   <span>Often</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="walk_frequency" value="always" class="custom-radio mr-3">
                                   <span>Always</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q17 - Safety Route Choice -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q17. How much do safety concerns affect your choice of walking routes?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="safety_route_choice" value="completely" class="custom-radio mr-3">
                                   <span>Completely</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="safety_route_choice" value="significantly" class="custom-radio mr-3">
                                   <span>Significantly</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="safety_route_choice" value="moderately" class="custom-radio mr-3">
                                   <span>Moderately</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="safety_route_choice" value="slightly" class="custom-radio mr-3">
                                   <span>Slightly</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="safety_route_choice" value="not_at_all" class="custom-radio mr-3">
                                   <span>Not at all</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q18 - Leisure Walk -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q18. How frequently do you walk for leisure in your neighbourhood?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="leisure_walk" value="never" class="custom-radio mr-3">
                                   <span>Never</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="leisure_walk" value="rarely" class="custom-radio mr-3">
                                   <span>Rarely</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="leisure_walk" value="sometimes" class="custom-radio mr-3">
                                   <span>Sometimes</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="radio" name="leisure_walk" value="often" class="custom-radio mr-3">
                                   <span>Often</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="leisure_walk" value="always" class="custom-radio mr-3">
                                   <span>Always</span>
                               </label>
                           </div>
                       </div>
                   </div>
                   
                   <!-- Section F: Traffic-Related Safety Risks -->
                   <div class="space-y-6">
                       <div class="flex items-center mb-6">
                           <div class="bg-primary bg-opacity-10 rounded-full p-3 mr-4">
                               <i class="fas fa-car-crash text-primary text-xl"></i>
                           </div>
                           <h3 class="text-2xl font-bold text-gray-800">Section F: Traffic-Related Safety Risks</h3>
                       </div>
                       
                       <!-- Q19 - Vehicle Speed Risk -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q19. How often do high vehicle speeds make walking feel risky?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="vehicle_speed_risk" value="always" class="custom-radio mr-3">
                                   <span>Always</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="vehicle_speed_risk" value="often" class="custom-radio mr-3">
                                   <span>Often</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="vehicle_speed_risk" value="sometimes" class="custom-radio mr-3">
                                   <span>Sometimes</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="vehicle_speed_risk" value="rarely" class="custom-radio mr-3">
                                   <span>Rarely</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="vehicle_speed_risk" value="never" class="custom-radio mr-3">
                                   <span>Never</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q20 - Witness Accidents -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q20. How frequently do you witness pedestrian accidents or near misses?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="witness_accidents" value="always" class="custom-radio mr-3">
                                   <span>Always</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="witness_accidents" value="often" class="custom-radio mr-3">
                                   <span>Often</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="witness_accidents" value="sometimes" class="custom-radio mr-3">
                                   <span>Sometimes</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="witness_accidents" value="rarely" class="custom-radio mr-3">
                                   <span>Rarely</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="witness_accidents" value="never" class="custom-radio mr-3">
                                   <span>Never</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q21 - Crossing Danger -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q21. How dangerous does it feel crossing busy roads without designated pedestrian facilities?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="crossing_danger" value="extremely_dangerous" class="custom-radio mr-3">
                                   <span>Extremely dangerous</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="crossing_danger" value="very_dangerous" class="custom-radio mr-3">
                                   <span>Very dangerous</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="crossing_danger" value="moderately_dangerous" class="custom-radio mr-3">
                                   <span>Moderately dangerous</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="crossing_danger" value="slightly_dangerous" class="custom-radio mr-3">
                                   <span>Slightly dangerous</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="crossing_danger" value="not_dangerous" class="custom-radio mr-3">
                                   <span>Not dangerous</span>
                               </label>
                           </div>
                       </div>
                   </div>
                   
                   <!-- Section G: Last Mile Accessibility -->
                   <div class="space-y-6">
                       <div class="flex items-center mb-6">
                           <div class="bg-primary bg-opacity-10 rounded-full p-3 mr-4">
                               <i class="fas fa-map-signs text-primary text-xl"></i>
                           </div>
                           <h3 class="text-2xl font-bold text-gray-800">Section G: Last Mile Accessibility</h3>
                       </div>
                       
                       <!-- Q22 - Bus Stop Convenience -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q22. How convenient is it for you to walk from your home to the nearest bus stop?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="bus_stop_convenience" value="not_convenient" class="custom-radio mr-3">
                                   <span>Not convenient at all</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="bus_stop_convenience" value="slightly_convenient" class="custom-radio mr-3">
                                   <span>Slightly convenient</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="bus_stop_convenience" value="moderately_convenient" class="custom-radio mr-3">
                                   <span>Moderately convenient</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="bus_stop_convenience" value="very_convenient" class="custom-radio mr-3">
                                   <span>Very convenient</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="bus_stop_convenience" value="extremely_convenient" class="custom-radio mr-3">
                                   <span>Extremely convenient</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Fix for Q23 - Path Friendliness question -->
<!-- Replace the current Q23 section with this corrected version -->

<div class="space-y-4">
    <label class="block text-lg font-semibold text-gray-800">Q23. How pedestrian-friendly and safe are the paths to bus stops and other transport hubs?</label>
    <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
        <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
            <input type="radio" name="path_friendliness" value="not_friendly" class="custom-radio mr-3">
            <span>Not friendly at all</span>
        </label>
        <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
            <input type="radio" name="path_friendliness" value="slightly_friendly" class="custom-radio mr-3">
            <span>Slightly friendly</span>
        </label>
        <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
            <input type="radio" name="path_friendliness" value="moderately_friendly" class="custom-radio mr-3">
            <span>Moderately friendly</span>
        </label>
        <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
            <input type="radio" name="path_friendliness" value="friendly" class="custom-radio mr-3">
            <span>Friendly</span>
        </label>
        <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
            <input type="radio" name="path_friendliness" value="very_friendly" class="custom-radio mr-3">
            <span>Very Friendly</span>
        </label>
    </div>
</div>
                       <!-- Q24 - Job Accessibility -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q24. How accessible are job opportunities within walking distance from your residence?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="job_accessibility" value="not_accessible" class="custom-radio mr-3">
                                   <span>Not accessible at all</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="job_accessibility" value="slightly_accessible" class="custom-radio mr-3">
                                   <span>Slightly accessible</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="job_accessibility" value="moderately_accessible" class="custom-radio mr-3">
                                   <span>Moderately accessible</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="job_accessibility" value="accessible" class="custom-radio mr-3">
                                   <span>Accessible</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="job_accessibility" value="very_accessible" class="custom-radio mr-3">
                                   <span>Very accessible</span>
                               </label>
                           </div>
                       </div>
                   </div>
                   
                   <!-- Section H: Accessibility for Vulnerable Groups -->
                   <div class="space-y-6">
                       <div class="flex items-center mb-6">
                           <div class="bg-primary bg-opacity-10 rounded-full p-3 mr-4">
                               <i class="fas fa-universal-access text-primary text-xl"></i>
                           </div>
                           <h3 class="text-2xl font-bold text-gray-800">Section H: Accessibility for Vulnerable Groups</h3>
                       </div>
                       
                       <!-- Q25 - Vulnerable Accommodation -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q25. How well do pedestrian routes in your area accommodate elderly persons, children, and persons with disabilities?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="vulnerable_accommodation" value="not_at_all" class="custom-radio mr-3">
                                   <span>Not at all</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="vulnerable_accommodation" value="slightly" class="custom-radio mr-3">
                                   <span>Slightly</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="vulnerable_accommodation" value="moderately" class="custom-radio mr-3">
                                   <span>Moderately</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="vulnerable_accommodation" value="well" class="custom-radio mr-3">
                                   <span>Well</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="vulnerable_accommodation" value="very_well" class="custom-radio mr-3">
                                   <span>Very well</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q26 - Children School Safety -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q26. How safe do you think it is for children to walk to school?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="children_school_safety" value="not_safe" class="custom-radio mr-3">
                                   <span>Not safe at all</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="children_school_safety" value="slightly_safe" class="custom-radio mr-3">
                                   <span>Slightly safe</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="children_school_safety" value="moderately_safe" class="custom-radio mr-3">
                                   <span>Moderately safe</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="children_school_safety" value="safe" class="custom-radio mr-3">
                                   <span>Safe</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="children_school_safety" value="very_safe" class="custom-radio mr-3">
                                   <span>Very safe</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q27 - Wheelchair Accessibility -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q27. How accessible are pedestrian crossings and footpaths for people using wheelchairs or mobility aids?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="wheelchair_accessibility" value="not_accessible" class="custom-radio mr-3">
                                   <span>Not accessible at all</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="wheelchair_accessibility" value="slightly_accessible" class="custom-radio mr-3">
                                   <span>Slightly accessible</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="wheelchair_accessibility" value="moderately_accessible" class="custom-radio mr-3">
                                   <span>Moderately accessible</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="wheelchair_accessibility" value="accessible" class="custom-radio mr-3">
                                   <span>Accessible</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="wheelchair_accessibility" value="very_accessible" class="custom-radio mr-3">
                                   <span>Very accessible</span>
                               </label>
                           </div>
                       </div>
                       
                       <!-- Q28 - Equal Access Effectiveness -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q28. How effective are current pedestrian facilities in ensuring equal access for all genders and age groups?</label>
                           <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                               <label class="flex items-center p-4 bg-red-50 rounded-xl cursor-pointer hover:bg-red-100 transition-all duration-200">
                                   <input type="radio" name="equal_access_effectiveness" value="not_effective" class="custom-radio mr-3">
                                   <span>Not effective at all</span>
                               </label>
                               <label class="flex items-center p-4 bg-orange-50 rounded-xl cursor-pointer hover:bg-orange-100 transition-all duration-200">
                                   <input type="radio" name="equal_access_effectiveness" value="slightly_effective" class="custom-radio mr-3">
                                   <span>Slightly effective</span>
                               </label>
                               <label class="flex items-center p-4 bg-yellow-50 rounded-xl cursor-pointer hover:bg-yellow-100 transition-all duration-200">
                                   <input type="radio" name="equal_access_effectiveness" value="moderately_effective" class="custom-radio mr-3">
                                   <span>Moderately effective</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="equal_access_effectiveness" value="very_effective" class="custom-radio mr-3">
                                   <span>Very effective</span>
                               </label>
                               <label class="flex items-center p-4 bg-green-50 rounded-xl cursor-pointer hover:bg-green-100 transition-all duration-200">
                                   <input type="radio" name="equal_access_effectiveness" value="extremely_effective" class="custom-radio mr-3">
                                   <span>Extremely effective</span>
                               </label>
                           </div>
                       </div>
                   </div>
                   
                   <!-- Additional Questions -->
                   <div class="space-y-6">
                       <div class="flex items-center mb-6">
                           <div class="bg-primary bg-opacity-10 rounded-full p-3 mr-4">
                               <i class="fas fa-exclamation-triangle text-primary text-xl"></i>
                           </div>
                           <h3 class="text-2xl font-bold text-gray-800">Additional Questions</h3>
                       </div>
                       
                       <!-- Q29 - Walking Barriers -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">Q29. What are the main barriers that discourage you from walking more often? (Select all that apply)</label>
                           <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="checkbox" name="barriers[]" value="poor_sidewalk" class="custom-checkbox mr-3">
                                   <span>Poor sidewalk condition</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="checkbox" name="barriers[]" value="lack_shade" class="custom-checkbox mr-3">
                                   <span>Lack of shade or shelter</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="checkbox" name="barriers[]" value="unsafe_crossings" class="custom-checkbox mr-3">
                                   <span>Unsafe road crossings</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="checkbox" name="barriers[]" value="long_distance" class="custom-checkbox mr-3">
                                   <span>Long distance to bus stops</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="checkbox" name="barriers[]" value="crime_concerns" class="custom-checkbox mr-3">
                                   <span>Crime or harassment concerns</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="checkbox" name="barriers[]" value="poor_lighting" class="custom-checkbox mr-3">
                                   <span>Poor street lighting</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="checkbox" name="barriers[]" value="vehicle_speeds" class="custom-checkbox mr-3">
                                   <span>High vehicle speeds</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="checkbox" name="barriers[]" value="lack_signals" class="custom-checkbox mr-3">
                                   <span>Lack of pedestrian signals</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="checkbox" name="barriers[]" value="no_amenities" class="custom-checkbox mr-3">
                                   <span>No pedestrian amenities</span>
                               </label>
                               <label class="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-primary hover:bg-opacity-10 transition-all duration-200">
                                   <input type="checkbox" name="barriers[]" value="narrow_sidewalks" class="custom-checkbox mr-3">
                                   <span>Narrow/crowded sidewalks</span>
                               </label>
                           </div>
                           <input type="text" name="barriers_other" placeholder="Other barriers (please specify)" 
                                  class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors duration-200">
                       </div>
                       
                       <!-- Q30 - Additional Comments -->
                       <div class="space-y-4">
                           <label class="block text-lg font-semibold text-gray-800">
                               <i class="fas fa-comments text-primary mr-2"></i>
                               Q30. Additional comments or suggestions regarding pedestrian safety and walkability:
                           </label>
                           <textarea name="additional_comments" rows="6"
                                     placeholder="Your insights are valuable and will help inform strategies to enhance safe, walkable streets..." 
                                     class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors duration-200 resize-none"></textarea>
                       </div>
                   </div>
               </div>
           </div>

           <!-- Survey Location -->
           <div class="glass-effect rounded-3xl overflow-hidden shadow-xl hover-lift" data-aos="fade-up" data-aos-delay="250">
               <div class="bg-gradient-to-r from-purple-500 to-indigo-600 p-6">
                   <div class="flex items-center text-white">
                       <div class="bg-white bg-opacity-20 rounded-full w-12 h-12 flex items-center justify-center mr-4">
                           <i class="fas fa-map-pin text-lg"></i>
                       </div>
                       <div>
                           <h2 class="text-2xl font-bold">Survey Location</h2>
                           <p class="opacity-90">Where are you taking this survey?</p>
                       </div>
                       <div class="ml-auto">
                           <i class="fas fa-crosshairs text-3xl opacity-80"></i>
                       </div>
                   </div>
               </div>
               
               <div class="p-8 bg-white space-y-6">
                   <!-- Manual Location Input -->
                   <div class="bg-blue-50 p-6 rounded-xl border border-blue-200">
                       <h4 class="font-semibold text-blue-800 mb-3 text-lg">Enter Location (Landmark or Description)</h4>
                       <input type="text" name="survey_location" placeholder="e.g., Westlands Shopping Mall, University of Nairobi Main Campus, Kasarani Stadium"
                              class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors duration-200">
                       <div class="text-sm text-blue-600 mt-2 px-1">
                           <i class="fas fa-info-circle mr-1"></i>
                           Please provide a recognizable landmark, building, or area name where you're currently located
                       </div>
                   </div>
                   
                   <!-- GPS Location (Optional) -->
                   <div class="bg-green-50 p-6 rounded-xl border border-green-200">
                       <div class="flex items-center justify-between mb-3">
                           <h4 class="font-semibold text-green-800 text-lg">GPS Location (Optional)</h4>
                           <button type="button" id="getLocationBtn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm transition-colors duration-200">
                               <i class="fas fa-crosshairs mr-2"></i>Get My Location
                           </button>
                       </div>
                       
                       <div class="grid grid-cols-2 gap-3">
                           <input type="hidden" name="latitude" id="latitude">
                           <input type="hidden" name="longitude" id="longitude">
                           <input type="hidden" name="location_accuracy" id="locationAccuracy">
                           <input type="hidden" name="location_method" value="manual" id="locationMethod">
                           
                           <div class="bg-white p-3 rounded-lg">
                               <label class="block text-xs font-medium text-gray-600 mb-1">Latitude</label>
                               <div id="latitudeDisplay" class="text-sm text-gray-800">Not captured</div>
                           </div>
                           <div class="bg-white p-3 rounded-lg">
                               <label class="block text-xs font-medium text-gray-600 mb-1">Longitude</label>
                               <div id="longitudeDisplay" class="text-sm text-gray-800">Not captured</div>
                           </div>
                       </div>
                       <div class="text-sm text-green-600 mt-2 px-1">
                           <i class="fas fa-shield-alt mr-1"></i>
                           GPS coordinates help with research accuracy but are completely optional
                       </div>
                       <div id="locationStatus" class="text-xs text-gray-500 mt-2 px-1"></div>
                   </div>
                   
                   <!-- Location Privacy Notice -->
                   <div class="bg-gray-50 p-6 rounded-xl border border-gray-200">
                       <div class="flex items-start gap-3">
                           <i class="fas fa-user-shield text-gray-500 text-lg mt-1 flex-shrink-0"></i>
                           <div class="text-sm text-gray-600">
                               <strong>Privacy Notice:</strong> Location data is used solely for research purposes to understand geographic patterns in survey responses. All location information is kept confidential and will not be used to identify individual respondents.
                           </div>
                       </div>
                   </div>
               </div>
           </div>

           <!-- Submit Section -->
           <div class="glass-effect rounded-3xl overflow-hidden shadow-xl hover-lift" data-aos="fade-up" data-aos-delay="300">
               <div class="submit-gradient p-12 text-white text-center">
                   <div class="mb-6">
                       <i class="fas fa-paper-plane text-6xl opacity-90"></i>
                   </div>
                   <h2 class="text-3xl font-bold mb-4">Thank You for Your Participation!</h2>
                   <p class="text-xl opacity-90 mb-8 px-2">Your insights will contribute to making Nairobi's streets safer and more pedestrian-friendly.</p>
                   <button type="submit" id="submitBtn" class="bg-white text-primary px-12 py-4 rounded-full text-xl font-bold hover:shadow-2xl transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-white focus:ring-opacity-50">
                       <i class="fas fa-check-circle mr-3"></i>
                       Submit Survey
                   </button>
                   <div class="mt-6 text-sm opacity-75 px-4">
                       <i class="fas fa-lock mr-2"></i>
                       Your responses are confidential and used strictly for academic purposes
                   </div>
               </div>
           </div>
       </form>
   </div>

   <!-- Success Modal -->
   <div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center">
       <div class="bg-white rounded-3xl p-8 m-4 max-w-md w-full text-center transform scale-95 transition-all duration-300">
           <div class="mb-6">
               <div class="bg-green-100 rounded-full w-20 h-20 mx-auto flex items-center justify-center">
                   <i class="fas fa-check text-green-500 text-3xl"></i>
               </div>
           </div>
           <h3 class="text-2xl font-bold text-gray-800 mb-4">Survey Submitted Successfully!</h3>
           <p class="text-gray-600 mb-6">Thank you for your participation in this important research. Your responses have been recorded securely.</p>
           <button onclick="closeSuccessModal()" class="bg-primary text-white px-8 py-3 rounded-full font-semibold hover:bg-opacity-90 transition-colors duration-200">
               Close
           </button>
       </div>
   </div>

   <!-- AOS Animation Library -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
   <script>
       // Initialize AOS animations
       AOS.init({
           duration: 800,
           easing: 'ease-out-cubic',
           once: true
       });

       // Form validation
       function validateForm() {
           const form = document.getElementById('surveyForm');
           let isValid = true;
           const errors = [];

           // Remove previous error styling
           form.querySelectorAll('.error').forEach(el => el.classList.remove('error'));
           form.querySelectorAll('.error-message').forEach(el => el.remove());

           // Check required radio groups - all WOD questions are required
           const radioGroups = [
               'gender', 'age', 'education', 'occupation', 'income', 'car_ownership', 'bus_usage', 'walking_usage', 'transport_mode',
               'general_safety', 'accident_concern', 'driver_yield', 'night_safety', 'walkway_importance', 'obstacles_frequency', 
               'path_connectivity', 'comfort_satisfaction', 'walkway_obstruction', 'street_lighting', 'road_surface_safety', 
               'traffic_calming', 'income_limitation', 'affordability_influence', 'cost_effect', 'walk_frequency', 
               'safety_route_choice', 'leisure_walk', 'vehicle_speed_risk', 'witness_accidents', 'crossing_danger',
               'bus_stop_convenience', 'path_friendliness', 'job_accessibility', 'vulnerable_accommodation', 
               'children_school_safety', 'wheelchair_accessibility', 'equal_access_effectiveness'
           ];
           
           radioGroups.forEach(groupName => {
               const radios = form.querySelectorAll(`input[name="${groupName}"]`);
               const checked = form.querySelector(`input[name="${groupName}"]:checked`);
               if (!checked && radios.length > 0) {
                   isValid = false;
                   radios[0].closest('.space-y-4').classList.add('error');
                   const errorMsg = document.createElement('div');
                   errorMsg.className = 'error-message';
                   errorMsg.textContent = 'This field is required';
                   radios[0].closest('.space-y-4').appendChild(errorMsg);
                   errors.push(`${groupName.replace('_', ' ')} is required`);
               }
           });

           // Check required text fields
           const requiredTextFields = ['trip_origin', 'trip_destination', 'sub_county', 'ward', 'estate', 'survey_location', 'additional_comments'];
           
           requiredTextFields.forEach(fieldName => {
               const field = form.querySelector(`[name="${fieldName}"]`);
               if (field && !field.value.trim()) {
                   isValid = false;
                   field.classList.add('error');
                   const errorMsg = document.createElement('div');
                   errorMsg.className = 'error-message';
                   errorMsg.textContent = 'This field is required';
                   field.parentNode.appendChild(errorMsg);
                   errors.push(`${fieldName.replace('_', ' ')} is required`);
               }
           });

           // Check barriers checkboxes (at least one required)
           const barrierCheckboxes = form.querySelectorAll('input[name="barriers[]"]');
           const checkedBarriers = form.querySelectorAll('input[name="barriers[]"]:checked');
           if (checkedBarriers.length === 0) {
               isValid = false;
               barrierCheckboxes[0].closest('.space-y-4').classList.add('error');
               const errorMsg = document.createElement('div');
               errorMsg.className = 'error-message';
               errorMsg.textContent = 'Please select at least one barrier';
               barrierCheckboxes[0].closest('.space-y-4').appendChild(errorMsg);
               errors.push('Barriers selection is required');
           }

           if (!isValid) {
               // Scroll to first error
               const firstError = form.querySelector('.error');
               if (firstError) {
                   firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
               }
               
               // Show error summary
               alert('Please fill in all required fields before submitting.');
           }

           return isValid;
       }

       // Progress tracking
       function updateProgress() {
           const form = document.getElementById('surveyForm');
           let totalFields = 0;
           let filledFields = 0;

           // Count all radio groups
           const radioGroups = [
               'gender', 'age', 'education', 'occupation', 'income', 'car_ownership', 'bus_usage', 'walking_usage', 'transport_mode',
               'general_safety', 'accident_concern', 'driver_yield', 'night_safety', 'walkway_importance', 'obstacles_frequency', 
               'path_connectivity', 'comfort_satisfaction', 'walkway_obstruction', 'street_lighting', 'road_surface_safety', 
               'traffic_calming', 'income_limitation', 'affordability_influence', 'cost_effect', 'walk_frequency', 
               'safety_route_choice', 'leisure_walk', 'vehicle_speed_risk', 'witness_accidents', 'crossing_danger',
               'bus_stop_convenience', 'path_friendliness', 'job_accessibility', 'vulnerable_accommodation', 
               'children_school_safety', 'wheelchair_accessibility', 'equal_access_effectiveness'
           ];
           
           radioGroups.forEach(groupName => {
               totalFields++;
               const checked = form.querySelector(`input[name="${groupName}"]:checked`);
               if (checked) filledFields++;
           });

           // Count required text fields
           const requiredTextFields = ['trip_origin', 'trip_destination', 'sub_county', 'ward', 'estate', 'survey_location', 'additional_comments'];
           
           requiredTextFields.forEach(fieldName => {
               totalFields++;
               const field = form.querySelector(`[name="${fieldName}"]`);
               if (field && field.value.trim()) filledFields++;
           });

           // Count barriers (counts as 1 field)
           totalFields++;
           const checkedBarriers = form.querySelectorAll('input[name="barriers[]"]:checked');
           if (checkedBarriers.length > 0) filledFields++;

           const progress = Math.min((filledFields / totalFields) * 100, 100);
           
           // Update progress bar
           document.getElementById('progressBar').style.width = progress + '%';
           
           // Update circular progress
        const progressRing = document.getElementById('progressRing');
        const progressText = document.getElementById('progressText');
        const circumference = 2 * Math.PI * 15.9155;
        const offset = circumference - (progress / 100) * circumference;
        
        progressRing.style.strokeDashoffset = offset;
        progressText.textContent = Math.round(progress) + '%';
    }

    // Form submission with proper validation
document.getElementById('surveyForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    console.log('Form submitted'); // Debug log
    
    // Validate form before submission
    if (!validateForm()) {
        return; // Stop submission if validation fails
    }
    
    const submitBtn = document.getElementById('submitBtn');
    const originalText = submitBtn.innerHTML;
    
    // Show loading state
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-3"></i>Submitting...';
    submitBtn.disabled = true;
    
    try {
        const formData = new FormData(this);
        
        // Debug: Log what we're sending
        console.log('Form data being sent:');
        for (let [key, value] of formData.entries()) {
            console.log(key, value);
        }
        
        const response = await fetch('submit_survey.php', {
            method: 'POST',
            body: formData,
            headers: {
                // Don't set Content-Type for FormData, let browser set it
            }
        });
        
        console.log('Response status:', response.status);
        console.log('Response ok:', response.ok);
        
        // Get response text first to see what we actually received
        const responseText = await response.text();
        console.log('Raw response:', responseText);
        
        // Try to parse as JSON
        let data;
        try {
            data = JSON.parse(responseText);
            console.log('Parsed JSON:', data);
        } catch (parseError) {
            console.error('Failed to parse JSON:', parseError);
            console.error('Response was:', responseText);
            throw new Error('Server returned invalid response. Please check server logs.');
        }
        
        if (response.ok && data.status === 'success') {
            // Success message
            alert('Survey submitted successfully! Thank you for your participation.\n\nSubmission ID: ' + (data.id || 'N/A'));
            
            // Reset form
            this.reset();
            
            // Clear any saved drafts
            if (typeof clearDraft === 'function') {
                clearDraft();
            }
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
        } else {
            // Handle error response
            console.error('Submission failed:', data);
            let errorMessage = data.message || 'Submission failed for unknown reason';
            
            // Add additional error details if available
            if (data.missing_fields && data.missing_fields.length > 0) {
                errorMessage += '\n\nMissing required fields: ' + data.missing_fields.join(', ');
            }
            
            if (data.error_details) {
                errorMessage += '\n\nTechnical details: ' + data.error_details;
            }
            
            throw new Error(errorMessage);
        }
        
    } catch (error) {
        console.error('Submission error:', error);
        
        let userMessage = 'Error submitting survey: ' + error.message;
        
        // Add helpful troubleshooting info
        if (error.message.includes('Failed to fetch')) {
            userMessage += '\n\nThis might be a network issue. Please check your internet connection and try again.';
        } else if (error.message.includes('invalid response')) {
            userMessage += '\n\nThere seems to be a server configuration issue. Please contact support.';
        }
        
        userMessage += '\n\nPlease check the browser console (F12) for technical details.';
        
        alert(userMessage);
    } finally {
        // Always restore button state
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
    }
});

// Enhanced validation function
function validateForm() {
    const form = document.getElementById('surveyForm');
    let isValid = true;
    const errors = [];
    
    // Define required fields - keeping it minimal as you mentioned no required fields
    const requiredFields = [
        { name: 'enumerator_name', label: 'Enumerator Name', type: 'text' },
        { name: 'gender', label: 'Gender', type: 'radio' },
        { name: 'age', label: 'Age Group', type: 'radio' }
    ];
    
    console.log('Validating form...');
    
    requiredFields.forEach(field => {
        let isFieldValid = false;
        
        if (field.type === 'radio' || field.type === 'checkbox') {
            const checked = form.querySelector(`input[name="${field.name}"]:checked`);
            isFieldValid = checked !== null;
            console.log(`Field ${field.name} (${field.type}):`, isFieldValid ? 'Valid' : 'Missing');
        } else {
            const input = form.querySelector(`[name="${field.name}"]`);
            isFieldValid = input && input.value.trim() !== '';
            console.log(`Field ${field.name} (${field.type}):`, isFieldValid ? `"${input?.value}"` : 'Missing');
        }
        
        if (!isFieldValid) {
            isValid = false;
            errors.push(field.label);
            
            // Highlight the field visually
            highlightMissingField(field.name);
        }
    });
    
    if (!isValid) {
        const errorMessage = 'Please fill in the following required fields:\n\n• ' + errors.join('\n• ');
        alert(errorMessage);
        
        // Scroll to first missing field
        scrollToFirstError(requiredFields);
    } else {
        console.log('Form validation passed');
    }
    
    return isValid;
}

// Helper function to highlight missing fields
function highlightMissingField(fieldName) {
    const field = document.querySelector(`[name="${fieldName}"]`);
    if (field) {
        // Add red border temporarily
        field.style.border = '2px solid #ef4444';
        field.style.boxShadow = '0 0 5px rgba(239, 68, 68, 0.5)';
        
        // Remove highlight after 3 seconds
        setTimeout(() => {
            field.style.border = '';
            field.style.boxShadow = '';
        }, 3000);
    }
}

// Helper function to scroll to first error
function scrollToFirstError(requiredFields) {
    for (let field of requiredFields) {
        const element = document.querySelector(`[name="${field.name}"]`);
        if (element) {
            element.scrollIntoView({ 
                behavior: 'smooth', 
                block: 'center' 
            });
            break;
        }
    }
}

// Optional: Add real-time validation feedback
function addRealTimeValidation() {
    const form = document.getElementById('surveyForm');
    const requiredInputs = form.querySelectorAll('input[name="enumerator_name"], input[name="gender"], input[name="age"]');
    
    requiredInputs.forEach(input => {
        input.addEventListener('change', function() {
            // Remove error styling when user fixes the field
            this.style.border = '';
            this.style.boxShadow = '';
        });
    });
}

// Initialize real-time validation when page loads
document.addEventListener('DOMContentLoaded', function() {
    addRealTimeValidation();
    console.log('Survey form initialized');
});

// Optional: Save draft functionality
function saveDraft() {
    const formData = new FormData(document.getElementById('surveyForm'));
    const draftData = {};
    
    for (let [key, value] of formData.entries()) {
        draftData[key] = value;
    }
    
    try {
        localStorage.setItem('surveyDraft', JSON.stringify(draftData));
        console.log('Draft saved');
    } catch (e) {
        console.warn('Could not save draft:', e);
    }
}

function loadDraft() {
    try {
        const draftData = localStorage.getItem('surveyDraft');
        if (draftData) {
            const data = JSON.parse(draftData);
            const form = document.getElementById('surveyForm');
            
            Object.keys(data).forEach(key => {
                const input = form.querySelector(`[name="${key}"]`);
                if (input) {
                    if (input.type === 'radio' || input.type === 'checkbox') {
                        if (input.value === data[key]) {
                            input.checked = true;
                        }
                    } else {
                        input.value = data[key];
                    }
                }
            });
            
            console.log('Draft loaded');
        }
    } catch (e) {
        console.warn('Could not load draft:', e);
    }
}

function clearDraft() {
    try {
        localStorage.removeItem('surveyDraft');
        console.log('Draft cleared');
    } catch (e) {
        console.warn('Could not clear draft:', e);
    }
}

// Auto-save draft every 30 seconds
setInterval(saveDraft, 30000);
    // Success modal functions
    function showSuccessModal() {
        const modal = document.getElementById('successModal');
        modal.classList.remove('hidden');
        modal.classList.add('flex');
        setTimeout(() => {
            modal.querySelector('div').classList.remove('scale-95');
            modal.querySelector('div').classList.add('scale-100');
        }, 10);
    }

    function closeSuccessModal() {
        const modal = document.getElementById('successModal');
        modal.querySelector('div').classList.remove('scale-100');
        modal.querySelector('div').classList.add('scale-95');
        setTimeout(() => {
            modal.classList.remove('flex');
            modal.classList.add('hidden');
        }, 300);
    }

    // Update progress on input change
    document.addEventListener('change', updateProgress);
    document.addEventListener('input', updateProgress);

    // Smooth scrolling for better UX
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Initialize progress on page load
    document.addEventListener('DOMContentLoaded', function() {
        updateProgress();
    });

    // Auto-save functionality (optional)
    let autoSaveInterval;
    function startAutoSave() {
        autoSaveInterval = setInterval(() => {
            const formData = new FormData(document.getElementById('surveyForm'));
            const data = {};
            for (let [key, value] of formData.entries()) {
                if (data[key]) {
                    if (Array.isArray(data[key])) {
                        data[key].push(value);
                    } else {
                        data[key] = [data[key], value];
                    }
                } else {
                    data[key] = value;
                }
            }
            localStorage.setItem('survey_draft', JSON.stringify(data));
        }, 30000); // Save every 30 seconds
    }

    // Load saved draft
    function loadDraft() {
        const draft = localStorage.getItem('survey_draft');
        if (draft) {
            const data = JSON.parse(draft);
            Object.entries(data).forEach(([name, value]) => {
                if (Array.isArray(value)) {
                    value.forEach(v => {
                        const input = document.querySelector(`[name="${name}"][value="${v}"]`);
                        if (input) {
                            input.checked = true;
                        }
                    });
                } else {
                    const input = document.querySelector(`[name="${name}"]`);
                    if (input) {
                        if (input.type === 'radio' || input.type === 'checkbox') {
                            const specificInput = document.querySelector(`[name="${name}"][value="${value}"]`);
                            if (specificInput) specificInput.checked = true;
                        } else {
                            input.value = value;
                        }
                    }
                }
            });
            updateProgress();
        }
    }

    // Clear draft after successful submission
    function clearDraft() {
        localStorage.removeItem('survey_draft');
    }

    // Initialize auto-save and load draft
    document.addEventListener('DOMContentLoaded', function() {
        loadDraft();
        startAutoSave();
    });
    
    
    // Location functionality
document.addEventListener('DOMContentLoaded', function() {
    const getLocationBtn = document.getElementById('getLocationBtn');
    const locationStatus = document.getElementById('locationStatus');
    const latitudeInput = document.getElementById('latitude');
    const longitudeInput = document.getElementById('longitude');
    const accuracyInput = document.getElementById('locationAccuracy');
    const methodInput = document.getElementById('locationMethod');
    const latitudeDisplay = document.getElementById('latitudeDisplay');
    const longitudeDisplay = document.getElementById('longitudeDisplay');

    if (getLocationBtn) {
        getLocationBtn.addEventListener('click', function() {
            if (!navigator.geolocation) {
                locationStatus.textContent = 'Geolocation is not supported by this browser.';
                locationStatus.className = 'text-xs text-red-500 mt-2';
                return;
            }

            // Update button to loading state
            const originalText = getLocationBtn.innerHTML;
            getLocationBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Getting Location...';
            getLocationBtn.disabled = true;
            locationStatus.textContent = 'Requesting location permission...';
            locationStatus.className = 'text-xs text-blue-500 mt-2';

            const options = {
                enableHighAccuracy: true,
                timeout: 10000,
                maximumAge: 300000 // 5 minutes
            };

            navigator.geolocation.getCurrentPosition(
                function(position) {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    const accuracy = position.coords.accuracy;

                    // Update form fields
                    latitudeInput.value = lat;
                    longitudeInput.value = lng;
                    accuracyInput.value = accuracy;
                    methodInput.value = 'gps';

                    // Update display
                    latitudeDisplay.textContent = lat.toFixed(6);
                    longitudeDisplay.textContent = lng.toFixed(6);

                    // Update status
                    locationStatus.innerHTML = `<i class="fas fa-check-circle mr-1"></i>Location captured successfully (±${Math.round(accuracy)}m accuracy)`;
                    locationStatus.className = 'text-xs text-green-600 mt-2';

                    // Reset button
                    getLocationBtn.innerHTML = '<i class="fas fa-check mr-2"></i>Location Captured';
                    getLocationBtn.disabled = false;
                    getLocationBtn.classList.remove('bg-green-600', 'hover:bg-green-700');
                    getLocationBtn.classList.add('bg-green-500');

                    // Try to get address (reverse geocoding) - optional
                    tryReverseGeocode(lat, lng);
                },
                function(error) {
                    let errorMessage = 'Unable to get location. ';
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            errorMessage += 'Location access denied by user.';
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorMessage += 'Location information unavailable.';
                            break;
                        case error.TIMEOUT:
                            errorMessage += 'Location request timed out.';
                            break;
                        default:
                            errorMessage += 'An unknown error occurred.';
                            break;
                    }

                    locationStatus.textContent = errorMessage;
                    locationStatus.className = 'text-xs text-red-500 mt-2';

                    // Reset button
                    getLocationBtn.innerHTML = originalText;
                    getLocationBtn.disabled = false;
                },
                options
            );
        });
    }

    // Optional: Try to get readable address from coordinates
    function tryReverseGeocode(lat, lng) {
        // This is optional - you could integrate with a geocoding service
        // For now, we'll just show coordinates
        console.log(`Location captured: ${lat}, ${lng}`);
    }

    // Update progress calculation to include location field
    const originalUpdateProgress = window.updateProgress;
    window.updateProgress = function() {
        const form = document.getElementById('surveyForm');
        let totalFields = 0;
        let filledFields = 0;

        // Count radio groups
        const radioGroups = ['gender', 'age', 'education', 'occupation', 'income', 'car_ownership', 'bus_usage', 'walking_usage', 'first_mile_transport', 'main_mile_transport', 'last_mile_transport', 'general_safety', 'accident_concern', 'driver_yield', 'night_safety', 'walkway_importance', 'obstacles_frequency', 'path_connectivity', 'comfort_satisfaction'];
        
        radioGroups.forEach(groupName => {
            totalFields++;
            const checked = form.querySelector(`input[name="${groupName}"]:checked`);
            if (checked) filledFields++;
        });

        // Count required text fields (including new survey_location)
        const requiredTextFields = ['trip_origin', 'trip_destination', 'sub_county', 'ward', 'estate', 'survey_location', 'additional_comments'];
        
        requiredTextFields.forEach(fieldName => {
            totalFields++;
            const field = form.querySelector(`[name="${fieldName}"]`);
            if (field && field.value.trim()) filledFields++;
        });

        // Count barriers (counts as 1 field)
        totalFields++;
        const checkedBarriers = form.querySelectorAll('input[name="barriers[]"]:checked');
        if (checkedBarriers.length > 0) filledFields++;

        const progress = Math.min((filledFields / totalFields) * 100, 100);
        
        // Update progress bar
        document.getElementById('progressBar').style.width = progress + '%';
        
        // Update circular progress
        const progressRing = document.getElementById('progressRing');
        const progressText = document.getElementById('progressText');
        const circumference = 2 * Math.PI * 15.9155;
        const offset = circumference - (progress / 100) * circumference;
        
        progressRing.style.strokeDashoffset = offset;
        progressText.textContent = Math.round(progress) + '%';
    };
});
</script>
</body>
</html>